<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <title>Events: Task 2</title>
    <style>
        p {
            color: purple;
            margin: 0.5em 0;
        }

        * {
            box-sizing: border-box;
        }

        canvas {
            border: 1px solid black;
        }
    </style>
    <link rel="stylesheet" href="../styles.css" />
</head>

<body>

    <section class="preview">
    </section>

    <canvas width="480" height="320" tabindex="0">

    </canvas>

    <script>
        const canvas = document.querySelector('canvas');
        const ctx = canvas.getContext('2d');

        function drawCircle(x, y, size) {
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.beginPath();
            ctx.fillStyle = 'black';
            ctx.arc(x, y, size, 0, 2 * Math.PI);
            ctx.fill();
        }

        let x = 50;
        let y = 50;
        const size = 30;
        // canvasの幅と高さを取得
        const canvasWidth = canvas.width;
        const canvasHeight = canvas.height;
        // (x,y)それぞれの最大値を計算
        const maxWidht = canvasWidth - size;
        const maxHeight = canvasHeight - size;

        drawCircle(x, y, size);

        // キーボードの入力を受け取り、入力に応じて円の座標を計算して描画する
        canvas.addEventListener("keydown", (event) => {
            const key = event.key;
            if (key === 'w' || key === 'W') {
                y -= y > size ? 1 : 0;
            } else if (key === 'a' || key === 'A') {
                x -= x > size ? 1 : 0;
            } else if (key === 's' || key === 'S') {
                y += y < maxHeight ? 1 : 0;
            } else if (key === 'd' || key === 'D') {
                x += x < maxWidht ? 1 : 0;
            }
            drawCircle(x, y, size);
        });

    </script>
</body>

</html>